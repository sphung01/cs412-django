<!--
    File: mini_fb/templates/mini_fb/profile.html
    Author: Steven Phung (sphung01@bu.edu), 5/27/2025
    Description: A page that displays a specific profile
    after the user clicks on the image.
-->

{% extends 'mini_fb/base.html' %}
{% block content %}
<main class="grid-container">

    <article class="featured">

        <!-- If a profile does have an image in the database, display it -->
        {% if profile.profile_image_url %}
            <img src="{{profile.profile_image_url}}" alt="{{profile.profile_image_url}}">
        {% endif %}
        <!-- If a profile does have an image in the database, display it (END) -->

        
        <!-- This container displays first name, last name, city, and email -->
        <div>
            <h2>{{profile.first_name}} {{profile.last_name}}</h2>
            <p><strong>City: </strong>{{profile.city}}</p>
            <p><strong>Email: </strong>{{profile.email_address}}</p>
        </div>
        <!-- This container displays first name, last name, city, and email (END) -->
        

        <!-- This container displays all comments on this profile -->
        <div>
            <h2>Comments: </h2>
            <!-- Performs a for loop on all messages -->
            {% for status in profile.get_status_message %}
            <!-- Displays the message and timestamp message was sent -->
            <p>{{status.profile}}: {{status.message}} (Sent: {{status.timestamp}})</p>
                
            <div>
                {% for img_status in status.get_images %}
                    {% if img_status.caption %}
                        <p>{{img_status.caption}}</p>
                    {% endif %}
                    <img src='{{img_status.image_file.url}}' alt='{{img_status.image_file.url}}'>
                {% endfor %}
            </div>

            {% endfor %}
            <h4>
                <a href="{% url 'mini_fb:create_status' profile.pk %}">Add Message</a>
            </h4>
        </div>
        <!-- This container displays all comments on this profile (END) -->

    </article>
</main>
{% endblock %}